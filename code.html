
<!--  Website Editor With URL-Source-Code Fetching Functionality. 
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nihar's Webpage Editor</title>
<script type="text/javascript">
var editboxHTML = 
'<html class="expand close">' +
'<head>' +
'<style type="text/css">' +
'.expand { width: 100%; height: 100%; }' +
'.close { border: none; font-size: 100%; color: #fff; margin: 0px; padding: 0px; }' +
'html,body { overflow: hidden; }' +
'<\/style>' +
'<\/head>' +
'<body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();">' +
'<form class="expand close" name="f">' +
'<textarea class="expand close" style="background: #222;" name="ta" wrap="hard" spellcheck="false">' +
'<\/textarea>' +
'<\/form>' +
'<\/body>' +
'<\/html>';
var defaultValue = '';
var old = '';      

// Initial function to fetch source code of an webpage.
function init() {
  var URL = prompt("Enter URL To Fetch HTML Code Of:", "https://");
  // If URL is neither null nor 'https://', it fetches URL. 'https://' is given because it is the placeholder and might get clicked 'OK'.
  // If user clicks 'CANCEL', URL value is taken as 'null'.
  if (URL && URL !== 'https://') {
    fetch(URL)
      .then(response => response.text())
      .then(data => {
        defaultValue = data;
        window.editbox.document.write(editboxHTML);
        window.editbox.document.close();
        window.editbox.document.f.ta.value = defaultValue;
        update();
      })
      .catch(error => {
        console.error('Error fetching source code of the URL:', error);
      });
  } else {
        window.editbox.document.write(editboxHTML);
        window.editbox.document.close();
        window.editbox.document.f.ta.value = defaultValue;
        update();
  }
}

function update() {
  var textarea = window.editbox.document.f.ta;
  var d = dynamicframe.document; 
  if (old != textarea.value) {
    old = textarea.value;
    d.open();
    d.write(old);
    if (old.replace(/[\r\n]/g,'') == defaultValue.replace(/[\r\n]/g,''))
    d.close();
  }
  window.setTimeout(update, 1000);
}
</script>
</head>
<frameset resizable="yes" rows="60%,*" onload="init();">
  <frame name="editbox" src="javascript:'';">
  <frame name="dynamicframe" src="javascript:'';">
</frameset>
</html>
-->
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nihar's Webpage Editor</title>
  <!-- Prism CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
  <style>
    .editor-container {
      display: flex;
      flex-direction: row;
    }
    .code-edit {
      width: 50%;
      height: 100%;
      overflow-y: auto;
      background: #222;
      color: #fff;
      padding: 10px;
      border-right: 1px solid #555;
    }
    .code-preview {
      width: 50%;
      height: 100%;
      overflow-y: auto;
      background: #f5f5f5;
    }
    .code-preview pre {
      margin: 0;
      padding: 10px;
      overflow: auto;
      border: none;
      background: inherit;
    }
    .code-preview code {
      background: inherit;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-html.min.js"></script>
</head>
<body onload="init();">
  <div class="editor-container">
    <div id="code-edit" class="code-edit" contenteditable="true" oninput="updateHighlighting();"></div>
    <div id="code-preview" class="code-preview"></div>
  </div>

  <script type="text/javascript">
    var defaultValue = '';
    var old = '';

    function init() {
      var URL = prompt("Enter URL To Fetch HTML Code Of:", "https://");
      if (URL && URL !== 'https://') {
        fetch(URL)
          .then(response => response.text())
          .then(data => {
            defaultValue = data;
            document.getElementById('code-edit').innerText = defaultValue;
            updateHighlighting();
          })
          .catch(error => {
            console.error('Error fetching source code of the URL:', error);
          });
      } else {
        document.getElementById('code-edit').innerText = defaultValue;
        updateHighlighting();
      }
    }

    function updateHighlighting() {
      var editor = document.getElementById('code-edit');
      var preview = document.getElementById('code-preview');
      var code = editor.innerText;

      // Update the highlighted code
      if (old !== code) {
        old = code;
        var highlightedCode = Prism.highlight(code, Prism.languages.html, 'html');
        editor.innerHTML = highlightedCode;

        // Ensure the text area remains editable
        editor.contentEditable = true;

        // Update the dynamic frame with rendered HTML
        preview.innerHTML = code;
      }
    }
  </script>
</body>
</html>

<!--  Includes Iframe option on loading.
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nihar's Webpage Editor</title>
<script type="text/javascript">

var editboxHTML = 
'<html class="expand close">' +
'<head>' +
'<style type="text/css">' +
'.expand { width: 100%; height: 100%; }' +
'.close { border: none; font-size: 100%; color: #fff; margin: 0px; padding: 0px; }' +
'html,body { overflow: hidden; }' +
'<\/style>' +
'<\/head>' +
'<body class="expand close" onload="document.f.ta.focus(); document.f.ta.select();">' +
'<form class="expand close" name="f">' +
'<textarea class="expand close" style="background: #222;" name="ta" wrap="hard" spellcheck="false">' +
'<\/textarea>' +
'<\/form>' +
'<\/body>' +
'<\/html>';
// The "\n\n\n\n" codes in the "iframe" code are there to increase space for easily pasting URLs.
var defaultStuff = '\n\n<iframe src="https://\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"style="border:none;" height="235px" width="345px"></iframe>';
var extraStuff = '<div style="position:absolute; margin:0em; bottom:0em; right:0em;"><small>\n  <\/a>.\n<\/small><\/div>';
var old = '';      
function init()
{
  window.editbox.document.write(editboxHTML);
  window.editbox.document.close();
  window.editbox.document.f.ta.value = defaultStuff;
  update();
}

function update()
{
  var textarea = window.editbox.document.f.ta;
  var d = dynamicframe.document; 

  if (old != textarea.value) {
    old = textarea.value;
    d.open();
    d.write(old);
    if (old.replace(/[\r\n]/g,'') == defaultStuff.replace(/[\r\n]/g,''))
      d.write(extraStuff);
    d.close();
  }

  window.setTimeout(update, 1000);
}

</script>
</head>

<frameset resizable="yes" rows="60%,*" onload="init();">
  <frame name="editbox" src="javascript:'';">
  <frame name="dynamicframe" src="javascript:'';">
</frameset>
</html>
-->
